(()=>{"use strict";var t,e,n=function(){function t(){}return Object.defineProperty(t,"CANVAS_HEIGHT",{get:function(){return t.TILE_SIZE*t.CANVAS_TILE_HEIGHT},enumerable:!1,configurable:!0}),Object.defineProperty(t,"CANVAS_WIDTH",{get:function(){return t.TILE_SIZE*t.CANVAS_TILE_WIDTH},enumerable:!1,configurable:!0}),Object.defineProperty(t,"ASPECT_RATIO",{get:function(){return t.CANVAS_TILE_HEIGHT/t.CANVAS_TILE_WIDTH},enumerable:!1,configurable:!0}),Object.defineProperty(t,"UI_RENDER_LAYER",{get:function(){return t.OBJECT_RENDERING_LAYERS-1},enumerable:!1,configurable:!0}),Object.defineProperty(t,"UI_COLLISION_LAYER",{get:function(){return t.OBJECT_COLLISION_LAYERS-1},enumerable:!1,configurable:!0}),Object.defineProperty(t,"CANVAS_CENTER_TILE_Y",{get:function(){return this.CANVAS_TILE_HEIGHT/2},enumerable:!1,configurable:!0}),Object.defineProperty(t,"CANVAS_CENTER_TILE_X",{get:function(){return this.CANVAS_TILE_WIDTH/2},enumerable:!1,configurable:!0}),Object.defineProperty(t,"CANVAS_CENTER_PIXEL_X",{get:function(){return t.CANVAS_WIDTH/2},enumerable:!1,configurable:!0}),Object.defineProperty(t,"CANVAS_CENTER_PIXEL_Y",{get:function(){return t.CANVAS_HEIGHT/2},enumerable:!1,configurable:!0}),t.CANVAS_TILE_HEIGHT=18,t.CANVAS_TILE_WIDTH=30,t.TILE_SIZE=16,t.OBJECT_RENDERING_LAYERS=16,t.OBJECT_COLLISION_LAYERS=16,t.CONTEXT_IMAGE_SMOOTHING_ENABLED=!1,t}(),i=function(){function t(){}return t.renderSprite=function(t,e,i,o,r,s,a,c,u){var l,h;void 0===u&&(u={});var p=a?a*n.TILE_SIZE:n.TILE_SIZE,d=c?c*n.TILE_SIZE:n.TILE_SIZE,f=null!==(l=u.scale)&&void 0!==l?l:1,g=null!==(h=u.rotation)&&void 0!==h?h:0,m=u.opacity&&u.opacity<1,b=0!==g,y=m||b;if(y&&(t.save(),m&&(t.globalAlpha=Math.max(0,u.opacity)),b)){var E=Math.floor((r+a/2)*n.TILE_SIZE)+.5,v=Math.floor((s+c/2)*n.TILE_SIZE)+.5;t.translate(E,v),t.rotate(g*Math.PI/180),t.translate(-E,-v)}t.drawImage(e,i*n.TILE_SIZE,o*n.TILE_SIZE,p,d,Math.floor(r*n.TILE_SIZE),Math.floor(s*n.TILE_SIZE),p*f,d*f),y&&t.restore()},t.renderSubsection=function(t,e,i,o,r,s){var a=Math.floor(i*n.TILE_SIZE),c=Math.floor(o*n.TILE_SIZE),u=Math.floor(r*n.TILE_SIZE),l=Math.floor(s*n.TILE_SIZE);e.drawImage(t.canvas,a,c,u-a,l-c,0,0,e.canvas.width,e.canvas.height)},t.renderCircle=function(t,e,i,o){void 0===o&&(o={}),t.beginPath(),t.arc(e*n.TILE_SIZE+n.TILE_SIZE/2,i*n.TILE_SIZE+n.TILE_SIZE/2,n.TILE_SIZE/2,0,2*Math.PI),t.stroke(),t.fillStyle=o.colour||"saddlebrown",t.fill()},t.fillRectangle=function(t,e,i,o,r,s){void 0===s&&(s={}),t.strokeStyle=s.colour?s.colour:"black",t.fillStyle=s.colour?s.colour:"black",t.beginPath(),t.rect(Math.floor(e*n.TILE_SIZE),Math.floor(i*n.TILE_SIZE),o,r),t.stroke(),t.fill()},t.strokeRectangle=function(t,e,n,i,o,r){t.strokeStyle=r||"black",t.lineWidth=1,t.strokeRect(e+.5,n+.5,i-1,o-1)},t.clearCanvas=function(t){t.clearRect(0,0,t.canvas.width,t.canvas.height)},t.createCanvas=function(t,e){var i=document.createElement("canvas");return i.width=t?t*n.TILE_SIZE:n.CANVAS_WIDTH,i.height=e?e*n.TILE_SIZE:n.CANVAS_HEIGHT,i},t.getContext=function(t){var e=t.getContext("2d");return e.imageSmoothingEnabled=n.CONTEXT_IMAGE_SMOOTHING_ENABLED,e},t.positionToPixelPosition=function(t){return t*n.TILE_SIZE},t.renderText=function(t,e,i,o,r){void 0===r&&(r={});var s=r.size?r.size:16,a=r.colour?r.colour:"black";t.font="".concat(s,"px Helvetica"),t.fillStyle="".concat(a),t.fillText(e,i*n.TILE_SIZE,o*n.TILE_SIZE)},t.textToArray=function(t,e,n){var i,o;void 0===n&&(n={});var r=null!==(i=n.size)&&void 0!==i?i:16,s=null!==(o=n.colour)&&void 0!==o?o:"black",a=document.createElement("canvas").getContext("2d");a.font="".concat(r,"px Helvetica"),a.fillStyle="".concat(s);for(var c=t.split(" "),u="",l=[],h=0;h<c.length;h++){var p="".concat(u," ").concat(c[h]);a.measureText(p).width>=e?(l.push(p),u=""):c.length-1!==h?u=p.trim():l.push(p)}return l},t}(),o=function(){function t(t,e,o,r,s,a){var c=this;this.container=t,this.engineObjectList=r,this.engineObjectDetails=s,this.engineControls=a,this.CANVAS_HEIGHT=n.CANVAS_HEIGHT,this.CANVAS_WIDTH=n.CANVAS_WIDTH,this.delta=0,this.lastRenderTimestamp=0,this.assets={images:{},audio:{}},this.debug={enabled:!0,stats:{fps:!1,fpsCounter:0,objectCount:!1},breakpoint:{frame:!1},timing:{frame:!1,frameBackground:!1,frameUpdate:!1,frameRender:!1},ui:{grid:{lines:!1,numbers:!1},canvasLayers:!1},object:{renderBoundary:!1,renderBackground:!1}},this.gamepad=void 0,this.engineTimer=0,this.scenes=function(t,e,n){if(n||2===arguments.length)for(var i,o=0,r=e.length;o<r;o++)!i&&o in e||(i||(i=Array.prototype.slice.call(e,0,o)),i[o]=e[o]);return t.concat(i||Array.prototype.slice.call(e))}([],e,!0),Object.keys(o.images).forEach((function(t){c.assets.images[t]=new Image,c.assets.images[t].src=o.images[t]})),Object.keys(o.audio).forEach((function(t){c.assets.audio[t]=new Audio(o.audio[t])})),this.debug.enabled&&this.initialiseDebuggerListeners(),this.canvas=this.createCanvas(),this.context=i.getContext(this.canvas),t.append(this.canvas),document.addEventListener("visibilitychange",(function(t){"visible"===document.visibilityState?console.log("tab is active"):console.log("tab is inactive")})),this.intialiseGamepadListeners(),this.changeScene(this.scenes[0]),this.frame(0)}return t.prototype.createCanvas=function(){var t=i.createCanvas();return t.addEventListener("contextmenu",(function(t){t.preventDefault()})),t},t.prototype.changeScene=function(t){this.currentScene=Reflect.construct(t,[this])},t.prototype.frame=function(t){this.debug.breakpoint.frame,this.debug.timing.frame&&console.log("[frame] ".concat(this.delta)),this.setDelta(t),i.clearCanvas(this.context),this.currentScene.frame(this.delta),this.debug.stats.fps&&(this.debug.stats.fpsCounter&&this.renderStats(0,"FPS","".concat(Math.round(1e3/(performance.now()-this.debug.stats.fpsCounter))," FPS")),this.debug.stats.fpsCounter=t),this.debug.stats.objectCount&&this.renderStats(1,"Objects","".concat(this.currentScene.objects.length," objects")),this.renderGrid(),this.currentScene.flaggedForMapChange&&this.currentScene.changeMap(this.currentScene.flaggedForMapChange),this.engineTimer+=this.delta,this.engineTimer>1&&(this.engine(),this.engineTimer=0),window.requestAnimationFrame(this.frame.bind(this))},t.prototype.setDelta=function(t){this.delta=(t-this.lastRenderTimestamp)/1e3,this.lastRenderTimestamp=t},t.prototype.renderStats=function(t,e,i){this.context.fillStyle="red",this.context.font="12px serif",this.context.fillText(i,this.CANVAS_WIDTH-50,(t+1)*n.TILE_SIZE)},t.prototype.renderGrid=function(){if((this.debug.ui.grid.lines||this.debug.ui.grid.numbers)&&i.fillRectangle(this.context,0,0,this.CANVAS_WIDTH,this.CANVAS_HEIGHT,{colour:"rgba(0, 0, 0, 0.25)"}),this.debug.ui.grid.lines)for(var t=0;t<this.CANVAS_WIDTH;t+=n.TILE_SIZE)for(var e=0;e<this.CANVAS_HEIGHT;e+=n.TILE_SIZE)i.strokeRectangle(this.context,t,e,n.TILE_SIZE,n.TILE_SIZE,"black");if(this.debug.ui.grid.numbers)for(t=0;t<n.CANVAS_TILE_WIDTH;t++)for(e=0;e<n.CANVAS_TILE_HEIGHT;e++)this.context.fillStyle="black",this.context.font="8px helvetica",this.context.fillText("".concat(t),t*n.TILE_SIZE+1,e*n.TILE_SIZE+8),this.context.fillText("".concat(e),t*n.TILE_SIZE+6,e*n.TILE_SIZE+14)},t.prototype.initialiseDebuggerListeners=function(){var t=this;void 0!==this.engineControls&&(this.engineControls.gridLines&&this.engineControls.gridLines.addEventListener("click",(function(){t.debug.ui.grid.lines=!t.debug.ui.grid.lines})),this.engineControls.gridNumbers&&this.engineControls.gridNumbers.addEventListener("click",(function(){t.debug.ui.grid.numbers=!t.debug.ui.grid.numbers})),this.engineControls.breakpoint&&this.engineControls.breakpoint.addEventListener("click",(function(){t.debug.breakpoint.frame=!t.debug.breakpoint.frame})),this.engineControls.fps&&this.engineControls.fps.addEventListener("click",(function(){t.debug.stats.fps=!t.debug.stats.fps})),this.engineControls.objectCount&&this.engineControls.objectCount.addEventListener("click",(function(){t.debug.stats.objectCount=!t.debug.stats.objectCount})),this.engineControls.timingFrame&&this.engineControls.timingFrame.addEventListener("click",(function(){t.debug.timing.frame=!t.debug.timing.frame})),this.engineControls.timingFrameBackground&&this.engineControls.timingFrameBackground.addEventListener("click",(function(){t.debug.timing.frameBackground=!t.debug.timing.frameBackground})),this.engineControls.timingFrameRender&&this.engineControls.timingFrameRender.addEventListener("click",(function(){t.debug.timing.frameRender=!t.debug.timing.frameRender})),this.engineControls.timingFrameUpdate&&this.engineControls.timingFrameUpdate.addEventListener("click",(function(){t.debug.timing.frameUpdate=!t.debug.timing.frameUpdate})),this.engineControls.canvasLayers&&this.engineControls.canvasLayers.addEventListener("click",(function(){t.debug.ui.canvasLayers=!t.debug.ui.canvasLayers})),this.engineControls.fullscreen&&this.engineControls.fullscreen.addEventListener("click",(function(){t.canvas.requestFullscreen().catch((function(t){throw new Error(t)}))})))},t.prototype.intialiseGamepadListeners=function(){var t=this;window.addEventListener("gamepadconnected",(function(e){console.log("Gamepad connected at index %d: %s. %d buttons, %d axes.",e.gamepad.index,e.gamepad.id,e.gamepad.buttons.length,e.gamepad.axes.length),t.gamepad=e.gamepad})),window.addEventListener("gamepaddisconnected",(function(e){t.gamepad=void 0}))},t.prototype.engine=function(){var t=this;if(null!==this.engineObjectList){var e=document.createElement("ul");this.engineObjectList.innerHTML="",this.engineObjectList.appendChild(e),this.currentScene.objects.forEach((function(n){var i=document.createElement("li");i.innerHTML=n.constructor.name,e.appendChild(i),i.addEventListener("click",(function(){t.engineSelectedObjectId=n.id,t.updateEngineObjectDetails()}))}))}},t.prototype.updateEngineObjectDetails=function(){var t=this;if(void 0!==this.engineSelectedObjectId&&null!==this.engineObjectDetails){var e=this.currentScene.objects.find((function(e){return e.id===t.engineSelectedObjectId}));void 0!==e&&(this.engineObjectDetails.innerHTML="",this.engineObjectDetails.innerHTML+="<h3>".concat(e.constructor.name,"</h3>"),Object.keys(e).forEach((function(n){var i="";i+='<div style="display:flex; padding: 0.25rem 0;">',i+='<span style="margin-right: auto;">'.concat(n,"</span>"),i+='<input value="'.concat(e[n],'"'),i+="</div>",t.engineObjectDetails.innerHTML+=i})))}},t}(),r=function(){function t(){}return t.getMousePosition=function(t,e){var i,o=t.getBoundingClientRect(),r={height:o.height,width:o.width},s={clientX:e.clientX,clientY:e.clientY};if(t.width>t.height){i=t.width/o.width,r.height=t.height/i;var a=o.height-r.height;s.clientY-=a/2}else{i=t.height/o.height,r.width=t.width/i;var c=o.width-r.width;s.clientX-=c/2}var u=t.width/r.width,l=t.height/r.height,h=(s.clientX-o.left)*u/n.TILE_SIZE,p=(s.clientY-o.top)*l/n.TILE_SIZE;return{x:Math.floor(h),y:Math.floor(p),exactX:h,exactY:p}},t.setCursor=function(t,e){t.style.cursor='url("'.concat(e,'"), auto')},Object.defineProperty(t,"isFullscreen",{get:function(){return null!==document.fullscreenElement},enumerable:!1,configurable:!0}),t.isClickWithin=function(t,e,n,i,o){return t.exactX>=e&&t.exactX<=e+i&&t.exactY>=n&&t.exactY<=n+o},t}(),s=function(){function t(t){var e=this;this.client=t,this.backgroundLayersAnimationTimer={},this.objects=[],this.globals={mouse:{click:{left:!1,middle:!1,right:!1},position:{x:0,y:0,exactX:0,exactY:0}},camera:{startX:0,startY:0,endX:0,endY:0},keyboard:{},latestMouseEvent:new MouseEvent("")},this.flaggedForMapChange=void 0,this.maps=[],this.renderingContext={background:[],objects:[]},this.eventEmitter=document.createElement("eventEmitter"),this.eventTypes={},this.backgroundLayerAnimationFrame={},this.context=this.client.context,this.assets=this.client.assets,t.canvas.addEventListener("mousemove",(function(n){e.globals.mouse.position=r.getMousePosition(t.canvas,n),e.globals.latestMouseEvent=n})),t.canvas.addEventListener("mousedown",(function(t){switch(console.log("[mousedown]",t),t.button){case 0:e.globals.mouse.click.left=!0;break;case 1:e.globals.mouse.click.middle=!0;break;case 2:e.globals.mouse.click.right=!0}})),t.canvas.addEventListener("mouseup",(function(t){switch(console.log("[mouseup]",t),t.button){case 0:e.globals.mouse.click.left=!1;break;case 1:e.globals.mouse.click.middle=!1;break;case 2:e.globals.mouse.click.right=!1}})),t.canvas.addEventListener("touchstart",(function(t){console.log("[touchstart]",t),e.globals.mouse.click.left=!0})),t.canvas.addEventListener("touchend",(function(t){console.log("[touchend]",t),e.globals.mouse.click.left=!1})),document.addEventListener("keydown",(function(t){t.repeat||(console.log("[keydown]",t),e.globals.keyboard[t.key.toLocaleLowerCase()]=!0)})),document.addEventListener("keyup",(function(t){t.repeat||(console.log("[keyup]",t),e.globals.keyboard[t.key.toLocaleLowerCase()]=!1)}))}return t.prototype.frame=function(t){this.renderBackground(t),this.updateObjects(t),this.renderObjects(t),this.customRenderer?this.customRenderer(this.renderingContext):this.defaultRenderer()},t.prototype.renderBackground=function(t){var e=this;this.client.debug.timing.frameBackground&&console.time("[frame] background"),this.backgroundLayers.forEach((function(n,o){var r=e.renderingContext.background[o];i.clearCanvas(r);for(var s=0;s<e.map.width;s++)for(var a=0;a<e.map.height;a++){var c=n.tiles[s]?n.tiles[s][a]:void 0;if(void 0!==c){var u=void 0;if(1===c.animationFrames.length)u=c.animationFrames[0];else{void 0===e.backgroundLayersAnimationTimer[n.index]&&(e.backgroundLayersAnimationTimer[n.index]={}),void 0===e.backgroundLayersAnimationTimer[n.index][s]&&(e.backgroundLayersAnimationTimer[n.index][s]={});var l=void 0;(l=void 0===e.backgroundLayersAnimationTimer[n.index][s][a]?0:e.backgroundLayersAnimationTimer[n.index][s][a]+t)>c.animationFrameDuration&&(l%=c.animationFrameDuration);for(var h=0;h<c.animationMap.length;h++)if(l<=c.animationMap[h]){u=c.animationFrames[h];break}e.backgroundLayersAnimationTimer[n.index][s][a]=l}i.renderSprite(r,e.assets.images[c.tileset],u.spriteX,u.spriteY,s,a)}}})),this.client.debug.timing.frameBackground&&console.timeEnd("[frame] background")},t.prototype.updateObjects=function(t){this.client.debug.timing.frameUpdate&&console.time("[frame] update"),this.objects.forEach((function(e){e.update&&e.update(t)})),this.client.debug.timing.frameUpdate&&console.timeEnd("[frame] update")},t.prototype.renderObjects=function(t){var e=this;this.client.debug.timing.frameRender&&console.time("[frame] render"),this.renderingContext.objects.forEach((function(t){i.clearCanvas(t)})),this.objects.forEach((function(t){e.client.debug.object.renderBackground&&t.debuggerRenderBackground(e.renderingContext.objects[t.renderLayer]),t.render&&t.isRenderable&&t.render(e.renderingContext.objects[t.renderLayer]),e.client.debug.object.renderBoundary&&t.debuggerRenderBoundary(e.renderingContext.objects[t.renderLayer])})),this.client.debug.timing.frameRender&&console.timeEnd("[frame] render")},t.prototype.defaultRenderer=function(){var t=this;this.globals.camera.startX=0,this.globals.camera.startY=0,this.globals.camera.endX=0,this.globals.camera.endY=0,this.renderingContext.background.forEach((function(e){t.context.drawImage(e.canvas,0,0)})),this.renderingContext.objects.forEach((function(e){t.context.drawImage(e.canvas,0,0)}))},t.prototype.addObject=function(t){this.objects.push(t)},t.prototype.removeObject=function(t){t.destroy&&t.destroy(),this.objects.splice(this.objects.indexOf(t),1)},t.prototype.removeObjectById=function(t){var e=this.objects.find((function(e){return e.id===t}));void 0!==e&&this.removeObject(e)},t.prototype.getObjectsByType=function(t){return this.objects.filter((function(e){return e instanceof t}))},t.prototype.hasCollisionAtPosition=function(t,e,n){var i=this.objects.find((function(n){return n.positionX===t&&n.positionY===e&&n.hasCollision}));return void 0!==i&&n!==i},t.prototype.willHaveCollisionAtPosition=function(t,e,n){var i=this.objects.find((function(n){return n.targetX===t&&n.targetY===e&&n.hasCollision}));return void 0!==i&&n!==i},t.prototype.isOutOfBounds=function(t,e){return t>this.map.width-1||e>this.map.height-1||t<0||e<0},t.prototype.hasOrWillHaveCollisionAtPosition=function(t,e,n){return this.hasCollisionAtPosition(t,e,n)||this.willHaveCollisionAtPosition(t,e,n)},t.prototype.getObjectAtPosition=function(t,e,i){return this.objects.find((function(i){return i.positionX===t&&i.positionY===e&&i.collisionLayer!==n.UI_COLLISION_LAYER}))},t.prototype.getAllObjectsAtPosition=function(t,e,i){return this.objects.filter((function(i){return i.positionX===t&&i.positionY===e&&i.collisionLayer!==n.UI_COLLISION_LAYER}))},t.prototype.removeAllObjects=function(){for(;this.objects.length>0;)this.removeObject(this.objects[0])},t.prototype.removeAllBackgroundLayers=function(){this.backgroundLayers=[]},t.prototype.setUpRenderingContexts=function(){this.renderingContext={background:[],objects:[]};for(var t=0;t<this.backgroundLayers.length;t++){var e=this.createCanvas();this.renderingContext.background[t]=i.getContext(e)}for(t=0;t<n.OBJECT_RENDERING_LAYERS;t++)e=this.createCanvas(),this.renderingContext.objects[t]=i.getContext(e)},t.prototype.createCanvas=function(){var t=i.createCanvas(this.map.width,this.map.height);return this.client.debug.ui.canvasLayers&&this.client.container.append(t),t},t.prototype.flagForMapChange=function(t){this.flaggedForMapChange=t},t.prototype.changeMap=function(t){var e,n;void 0!==this.map&&this.map.destroy(),this.removeAllObjects(),this.removeAllBackgroundLayers(),console.log("[Scene] changing map to",t),this.map=Reflect.construct(this.maps[t],[this,this.context,this.assets]),(e=this.backgroundLayers).push.apply(e,this.map.backgroundLayers),(n=this.objects).push.apply(n,this.map.objects),this.setUpRenderingContexts(),this.flaggedForMapChange=void 0},t.prototype.changeScene=function(t){this.client.changeScene(t)},t.prototype.setCustomRenderer=function(t){this.customRenderer=t},t.prototype.removeCustomerRenderer=function(){this.customRenderer=void 0},t.prototype.addEventListener=function(t,e){this.eventEmitter.addEventListener(t,e)},t.prototype.removeEventListener=function(t,e){this.eventEmitter.removeEventListener(t,e)},t.prototype.dispatchEvent=function(t,e){var n=new CustomEvent(t,{detail:e});console.log("[dispatchEvent]",n),this.eventEmitter.dispatchEvent(n)},t}(),a=function(){function t(t){this.scene=t,this.globals={},this.context=this.scene.context,this.assets=this.scene.assets}return t.prototype.destroy=function(){},t}(),c=function(){return c=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},c.apply(this,arguments)},u={tileset:"sprites",animationFrameDuration:1,animationFrames:[],animationMap:[1]},l=c(c({},u),{animationFrames:[{spriteX:0,spriteY:0}]}),h=c(c({},u),{animationFrames:[{spriteX:0,spriteY:9}]}),p=c(c({},u),{animationFrames:[{spriteX:0,spriteY:10}]}),d=c(c({},u),{animationFrames:[{spriteX:0,spriteY:11}]}),f=c(c({},u),{animationFrames:[{spriteX:0,spriteY:15}]}),g=[l,l,l,l,l,l,l,l,l,l,h,p,d,f,f,f],m={index:0,tiles:[g,g,g,g,g,g,g,g,g,g]},b=function(){function t(t,e){var n,i,o,r,s,a;this.scene=t,this.id=crypto.randomUUID(),this.positionX=-1,this.positionY=-1,this.targetX=-1,this.targetY=-1,this.width=1,this.height=1,this.keyListeners={},this.eventListeners={},this.flaggedForRender=!0,this.flaggedForUpdate=!0,this.flaggedForDestroy=!1,this.mainContext=this.scene.context,this.assets=this.scene.assets,void 0!==e.positionX&&(this.positionX=e.positionX,void 0===e.targetX&&(this.targetX=this.positionX)),void 0!==e.positionY&&(this.positionY=e.positionY,void 0===e.targetY&&(this.targetY=this.positionY)),void 0!==e.targetX&&(this.targetX=e.targetX),void 0!==e.targetY&&(this.targetY=e.targetY),this.isRenderable=null!==(n=e.isRenderable)&&void 0!==n&&n,this.renderLayer=null!==(i=e.renderLayer)&&void 0!==i?i:0,this.renderOpacity=null!==(o=e.renderOpacity)&&void 0!==o?o:1,this.hasCollision=null!==(r=e.hasCollision)&&void 0!==r&&r,this.collisionLayer=null!==(s=e.collisionLayer)&&void 0!==s?s:0,this.renderScale=null!==(a=e.renderScale)&&void 0!==a?a:1}return Object.defineProperty(t.prototype,"boundingBox",{get:function(){return this.width,this.height,{top:this.positionY,right:this.positionX+this.width,bottom:this.positionY+this.height,left:this.positionX}},enumerable:!1,configurable:!0}),t.prototype.debuggerRenderBoundary=function(t){i.strokeRectangle(t,Math.floor(this.boundingBox.left*n.TILE_SIZE),Math.floor(this.boundingBox.top*n.TILE_SIZE),Math.floor(this.width*n.TILE_SIZE),Math.floor(this.height*n.TILE_SIZE),"red")},t.prototype.debuggerRenderBackground=function(t){i.fillRectangle(t,this.boundingBox.left,this.boundingBox.top,Math.floor(this.width*n.TILE_SIZE),Math.floor(this.height*n.TILE_SIZE),{colour:"red"})},Object.defineProperty(t.prototype,"cameraRelativePositionX",{get:function(){return this.positionX+this.scene.globals.camera.startX},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cameraRelativePositionY",{get:function(){return this.positionY+this.scene.globals.camera.startY},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pixelWidth",{get:function(){return this.width*n.TILE_SIZE},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pixelHeight",{get:function(){return this.height*n.TILE_SIZE},enumerable:!1,configurable:!0}),t.prototype.isCollidingWith=function(t){return this.isWithinHorizontalBounds(t)&&this.isWithinVerticalBounds(t)},t.prototype.isWithinHorizontalBounds=function(t){return t.boundingBox.left>=this.boundingBox.left&&t.boundingBox.left<=this.boundingBox.right||t.boundingBox.right>=this.boundingBox.left&&t.boundingBox.right<=this.boundingBox.right},t.prototype.isWithinVerticalBounds=function(t){return t.boundingBox.top>=this.boundingBox.top&&t.boundingBox.top<=this.boundingBox.bottom||t.boundingBox.bottom>=this.boundingBox.top&&t.boundingBox.bottom<=this.boundingBox.bottom},t}(),y=(t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)},function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}),E=function(t){function e(e,n){var i,o=t.call(this,e,n)||this;return o.scene=e,o.isRenderable=!0,o.hasCollision=!1,o.width=n.width,o.height=n.height,o.tileset=n.tileset,o.spriteX=n.spriteX,o.spriteY=n.spriteY,o.renderLayer=null!==(i=n.renderLayer)&&void 0!==i?i:0,o}return y(e,t),e.prototype.render=function(t){i.renderSprite(t,this.assets.images.sprites,this.spriteX,this.spriteY,this.positionX,this.positionY,this.width,this.height)},e}(b),v=function(){function t(t,e){this.tileset=t,this.frames=e,this.duration=e.reduce((function(t,e){return t+e.duration}),0)}return t.prototype.currentFrame=function(t){for(var e=t%this.duration,n=0,i=0;i<this.frames.length;i++)if(e<(n+=this.frames[i].duration))return this.frames[i];return this.frames[0]},t}(),_=function(){function t(){}return t.DEFAULT_PIPE_SPEED=4,t.DEFAULT_PLAYER_GRAVITY=48,t.DEFAULT_PLAYER_ACCELERATION=-12,t.DEFAULT_PIPE_GAP=3,t.DEFAULT_PIPE_REGION=8,t}();!function(t){t.GameIdle="GameIdle",t.GameStart="GameStart",t.GameEnd="GameEnd"}(e||(e={}));var I,L,T=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),S={default:new v("sprites",[{spriteX:.1875,spriteY:30.6875,duration:.0625},{spriteX:1.9375,spriteY:30.6875,duration:.0625},{spriteX:3.6875,spriteY:30.6875,duration:.0625},{spriteX:1.9375,spriteY:30.6875,duration:.0625}])},C=function(t){function o(n,i){var o=t.call(this,n,i)||this;return o.scene=n,o.isRenderable=!0,o.renderLayer=12,o.width=1.0625,o.height=.75,o.speed=0,o.animationEnabled=!0,o.animation={index:0,timer:0},o.positionX=o.startingX,o.positionY=o.startingY,o.animations=S,o.state="playing",o.scene.addEventListener(e.GameIdle,o.onGameIdle.bind(o)),o.scene.addEventListener(e.GameStart,o.onGameStart.bind(o)),o.scene.addEventListener(e.GameEnd,o.onGameOver.bind(o)),o}return T(o,t),o.prototype.update=function(t){switch(this.state){case"idle":break;case"playing":this.updatePlaying(t);break;case"game-over":this.updateGameOver(t)}},o.prototype.updatePlaying=function(t){this.updateGravity(t),this.updateFlap(t),this.positionY+=this.speed*t,this.updateAnimationTimer(t)},o.prototype.updateGameOver=function(t){this.positionY>n.CANVAS_TILE_HEIGHT-3||(this.speed+=48*t,this.positionY+=this.speed*t)},o.prototype.render=function(t){this.renderPlayer(t)},o.prototype.updateGravity=function(t){this.speed+=48*t},o.prototype.updateFlap=function(t){(this.scene.globals.mouse.click.left||this.scene.globals.keyboard[" "])&&(this.scene.globals.mouse.click.left=!1,this.scene.globals.keyboard[" "]=!1,this.speed>0&&(this.speed=0),this.speed+=-12)},o.prototype.updateAnimationTimer=function(t){this.animationEnabled&&(this.animation.timer=(this.animation.timer+t)%this.animations.default.duration)},o.prototype.renderPlayer=function(t){var e=this.animations.default,n=e.currentFrame(this.animation.timer);i.renderSprite(t,this.assets.images[e.tileset],n.spriteX,n.spriteY,this.positionX,this.positionY,this.width,this.height)},o.prototype.onGameIdle=function(){this.state="idle",this.positionX=this.startingX,this.positionY=this.startingY,this.speed=0},o.prototype.onGameStart=function(){this.speed=-12,this.state="playing"},o.prototype.onGameOver=function(){this.state="game-over"},Object.defineProperty(o.prototype,"startingX",{get:function(){return n.CANVAS_TILE_WIDTH/2-this.width/2},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"startingY",{get:function(){return n.CANVAS_TILE_HEIGHT/2-this.height/2},enumerable:!1,configurable:!0}),o}(b),O=((I={})[0]={spriteX:8.5,spriteY:19},I[1]={spriteX:8.5625,spriteY:29.6875},I[2]={spriteX:8.5,spriteY:30.4375},I[3]={spriteX:8.125,spriteY:31.1875},I[4]={spriteX:31.375,spriteY:-.125},I[5]={spriteX:31.375,spriteY:.625},I[6]={spriteX:31.5,spriteY:1.5},I[7]={spriteX:31.5,spriteY:2.5},I[8]={spriteX:18.25,spriteY:15},I[9]={spriteX:19.375,spriteY:12.75},I),A=((L={})[0]={spriteX:30.875,spriteY:3.75},L[1]={spriteX:8.35,spriteY:28.45},L[2]={spriteX:18.125,spriteY:10},L[3]={spriteX:19,spriteY:10},L[4]={spriteX:19.875,spriteY:10},L[5]={spriteX:20.75,spriteY:10},L[6]={spriteX:18.125,spriteY:11.5},L[7]={spriteX:19,spriteY:11.5},L[8]={spriteX:19.875,spriteY:11.5},L[9]={spriteX:20.75,spriteY:11.5},L),j=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),w=function(t){function e(e,i){var o=t.call(this,e,i)||this;return o.scene=e,o.isRenderable=!0,o.renderLayer=n.UI_COLLISION_LAYER,o}return j(e,t),e.prototype.render=function(t){var e=this,o=this.scene.globals.score.toString().split("");o.forEach((function(r,s){var a="1"===r?.16:0;i.renderSprite(t,e.assets.images.sprites,A[r].spriteX,A[r].spriteY,n.CANVAS_TILE_WIDTH/2-o.length/2+s+a,n.CANVAS_TILE_HEIGHT/8,void 0,1.125)}))},e}(b),k=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),Y=2.25,x=function(t){function o(i,o){var r=t.call(this,i,o)||this;return r.scene=i,r.isRenderable=!0,r.renderLayer=10,r.offset=0,r.checkCollision=!0,r.movingFloor=!1,r.player=o.player,r.height=2,r.width=n.CANVAS_TILE_WIDTH,r.positionX=0,r.positionY=n.CANVAS_TILE_HEIGHT-r.height,r.scene.addEventListener(e.GameStart,r.onGameStart.bind(r)),r.scene.addEventListener(e.GameEnd,r.onGameOver.bind(r)),r}return k(o,t),o.prototype.update=function(t){this.checkCollision&&this.updateCheckIfPlayerAboveGround(t),this.movingFloor&&(this.offset+=4*t,this.offset%=Y)},o.prototype.render=function(t){this.renderFloor(t)},o.prototype.updateCheckIfPlayerAboveGround=function(t){this.player.positionY+this.player.height<this.positionY||this.scene.dispatchEvent(e.GameEnd)},o.prototype.renderFloor=function(t){for(var e=0;e<n.CANVAS_TILE_WIDTH+Y;e+=Y)i.renderSprite(t,this.assets.images.sprites,19,0,this.positionX+e-this.offset,this.positionY,Y,this.height)},o.prototype.onGameStart=function(){this.checkCollision=!0,this.movingFloor=!0},o.prototype.onGameOver=function(){this.checkCollision=!1,this.movingFloor=!1},o}(b),X=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),P=function(){},G=function(t){function e(e,n){var i,o,r,s=t.call(this,e,n)||this;return s.scene=e,s.timer=0,s.intervalsComplete=0,s.duration=null!==(i=n.duration)&&void 0!==i?i:1,s.onInterval=null!==(o=n.onInterval)&&void 0!==o?o:P,s.onDestroy=null!==(r=n.onDestroy)&&void 0!==r?r:void 0,s.maxIntervals=n.maxIntervals,s}return X(e,t),e.prototype.update=function(t){this.timer+=t,this.timer>=this.duration&&(this.onInterval(),this.timer-=this.duration,this.intervalsComplete++,this.maxIntervals&&this.intervalsComplete>=this.maxIntervals&&this.scene.removeObject(this))},e.prototype.destroy=function(){this.onDestroy&&this.onDestroy(),console.log("[IntervalObject] destroyed")},e}(b),N=function(){function t(){}return t.randomIntFromRange=function(t,e){return Math.floor(this.randomNumberFromRange(t,e))},t.randomNumberFromRange=function(t,e){return Math.random()*(e-t+1)+t},t.randomStartingDelta=function(t){return Math.random()*(null!=t?t:1)},t}(),H=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),R=1.625,B=.8125,D=5.25,F=20.1875,V=1.625,M=.8125,Z=5.25,W=29.375,U=1.625,z=.8125,J=3.5,q=29.375,K=function(t){function o(i,o){var r=t.call(this,i,o)||this;return r.scene=i,r.isRenderable=!0,r.width=1.625,r.canMove=!0,r.player=o.player,r.type=o.type,r.height=o.height,r.positionY="top"===r.type?0:n.CANVAS_TILE_HEIGHT-r.height,r.positionX=n.CANVAS_TILE_WIDTH+1,r.scene.addEventListener(e.GameIdle,r.onGameIdle.bind(r)),r.scene.addEventListener(e.GameEnd,r.onGameEnd.bind(r)),r}return H(o,t),o.prototype.update=function(t){this.canMove&&(this.updatePosition(t),this.updateCollidingWithPlayer(t))},o.prototype.render=function(t){switch(this.type){case"top":this.renderTopPipe(t);break;case"bottom":this.renderBottomPipe(t)}},o.prototype.updatePosition=function(t){this.positionX-=4*t,this.positionX<-3&&this.scene.removeObject(this)},o.prototype.updateCollidingWithPlayer=function(t){this.isCollidingWith(this.player)&&this.scene.dispatchEvent(e.GameEnd),this.player.positionY<0&&this.isWithinHorizontalBounds(this.player)&&this.scene.dispatchEvent(e.GameEnd)},o.prototype.renderTopPipe=function(t){for(var e=this.height-z;e>=-3;e-=M)i.renderSprite(t,this.assets.images.sprites,Z,W,this.positionX,this.positionY+e,V,M);i.renderSprite(t,this.assets.images.sprites,J,q,this.positionX,this.positionY+this.height-z,U,z)},o.prototype.renderBottomPipe=function(t){i.renderSprite(t,this.assets.images.sprites,D,F,this.positionX,this.positionY,R,B);for(var e=B;e<this.height;e+=M)i.renderSprite(t,this.assets.images.sprites,Z,W,this.positionX,this.positionY+e,V,M)},o.prototype.onGameIdle=function(){this.scene.removeObjectById(this.id)},o.prototype.onGameEnd=function(){this.canMove=!1},o}(b),Q=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),$=function(t){function i(i,o){var r=t.call(this,i,o)||this;return r.scene=i,r.isRenderable=!0,r.width=.0625,r.height=n.CANVAS_TILE_HEIGHT,r.player=o.player,r.positionX=n.CANVAS_TILE_WIDTH+2.625,r.scene.addEventListener(e.GameEnd,r.onGameOver.bind(r)),r}return Q(i,t),i.prototype.update=function(t){this.updatePosition(t),this.updatePoints(t)},i.prototype.render=function(t){},i.prototype.updatePosition=function(t){this.positionX-=4*t,this.positionX<-3&&this.scene.removeObject(this)},i.prototype.updatePoints=function(t){this.positionX<this.player.positionX&&(this.scene.globals.score++,this.scene.removeObject(this))},i.prototype.onGameOver=function(){this.scene.removeObjectById(this.id)},i}(b),tt=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),et={bronze:{spriteX:7,spriteY:29.75},silver:{spriteX:7,spriteY:28.25},gold:{spriteX:7.5,spriteY:17.5},platinum:{spriteX:7.5,spriteY:16}},nt=function(t){function e(e,i){var o=t.call(this,e,i)||this;return o.scene=e,o.isRenderable=!0,o.renderLayer=n.UI_COLLISION_LAYER,o.background=o.createBackground(),o.scene.addObject(o.background),"none"!==o.medalType&&(o.medal=o.createMedal(o.medalType),o.scene.addObject(o.medal)),o}return tt(e,t),e.prototype.render=function(t){this.renderScore(t),this.renderScoreHighscore(t)},e.prototype.createBackground=function(){return new E(this.scene,{positionX:n.CANVAS_CENTER_TILE_X-3.75,positionY:n.CANVAS_CENTER_TILE_Y-2,width:7.5,height:4,tileset:"sprites",spriteX:0,spriteY:16,renderLayer:n.UI_COLLISION_LAYER})},e.prototype.createMedal=function(t){if("none"!==t)return new E(this.scene,{positionX:this.background.positionX+1,positionY:this.background.positionY+1.375,width:1.5,height:1.5,tileset:"sprites",spriteX:et[t].spriteX,spriteY:et[t].spriteY,renderLayer:n.UI_COLLISION_LAYER})},e.prototype.renderScore=function(t){var e=this,n=this.scene.globals.score.toString().split(""),o=this.background.positionX+this.background.width-1.5,r=this.background.positionY+1.125,s=.5625*(n.length-1);n.forEach((function(n,a){i.renderSprite(t,e.assets.images.sprites,O[n].spriteX,O[n].spriteY,o-s+.5625*a,r,.5,.75)}))},e.prototype.renderScoreHighscore=function(t){var e=this,n=this.scene.globals.highscore.toString().split(""),o=this.background.positionX+this.background.width-1.5,r=this.background.positionY+1.125,s=.5625*(n.length-1);n.forEach((function(n,a){i.renderSprite(t,e.assets.images.sprites,O[n].spriteX,O[n].spriteY,o-s+.5625*a,r+1.5,.5,.75)}))},Object.defineProperty(e.prototype,"medalType",{get:function(){return this.scene.globals.score>=40?"platinum":this.scene.globals.score>=30?"gold":this.scene.globals.score>=20?"silver":this.scene.globals.score>=10?"bronze":"none"},enumerable:!1,configurable:!0}),e.prototype.destroy=function(){this.scene.removeObjectById(this.background.id),this.medal&&this.scene.removeObjectById(this.medal.id)},e}(b),it=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),ot=function(t){function i(n,i){var o=t.call(this,n,i)||this;return o.scene=n,o.continueTimer=0,o.continueDuration=.5,o.player=i.player,o.scene.addEventListener(e.GameIdle,o.onGameIdle.bind(o)),o.scene.addEventListener(e.GameStart,o.onGameStart.bind(o)),o.scene.addEventListener(e.GameEnd,o.onGameEnd.bind(o)),o.scene.dispatchEvent(e.GameIdle),o}return it(i,t),i.prototype.update=function(t){switch(this.state){case"idle":this.updateGameIdle();break;case"game-over":this.updateGameEnd(t)}},i.prototype.onGameIdle=function(){"idle"!==this.state&&(this.cleanupGameEnd(),this.state="idle",this.scene.globals.score=0,this.idleSprite=new E(this.scene,{positionX:n.CANVAS_TILE_WIDTH/2-1.8375+.05,positionY:n.CANVAS_TILE_HEIGHT/2-.8,width:3.675,height:3.5,tileset:"sprites",spriteX:18.25,spriteY:5.25,renderLayer:n.UI_COLLISION_LAYER}),this.scene.addObject(this.idleSprite))},i.prototype.onGameStart=function(){var t=this;"playing"!==this.state&&(this.state="playing",this.idleSprite&&this.scene.removeObjectById(this.idleSprite.id),this.interval=new G(this.scene,{duration:2,onInterval:function(){var e=_.DEFAULT_PIPE_GAP,i=n.CANVAS_TILE_HEIGHT/2-4,o=i+4,r=N.randomNumberFromRange(i,o);t.scene.addObject(new K(t.scene,{player:t.player,type:"top",height:r})),t.scene.addObject(new K(t.scene,{player:t.player,type:"bottom",height:n.CANVAS_TILE_HEIGHT-r-e})),t.scene.addObject(new $(t.scene,{player:t.player}))}}),this.scene.addObject(this.interval))},i.prototype.onGameEnd=function(){"game-over"!==this.state&&(this.state="game-over",this.interval&&this.scene.removeObjectById(this.interval.id),this.scorecard=new nt(this.scene,{}),this.scene.addObject(this.scorecard),this.scene.globals.score>this.scene.globals.highscore&&(this.scene.globals.highscore=this.scene.globals.score,localStorage.setItem("highscore",this.scene.globals.score.toString())),this.continueTimer=0)},i.prototype.cleanupGameEnd=function(){this.scorecard&&this.scene.removeObjectById(this.scorecard.id)},i.prototype.updateGameEnd=function(t){this.continueTimer+=t,console.log(this.continueTimer),this.continueTimer<this.continueDuration||(this.scene.globals.keyboard[" "]||this.scene.globals.mouse.click.left)&&(this.scene.globals.keyboard[" "]=!1,this.scene.globals.mouse.click.left=!1,this.scene.dispatchEvent(e.GameIdle))},i.prototype.updateGameIdle=function(){(this.scene.globals.keyboard[" "]||this.scene.globals.mouse.click.left)&&(this.scene.globals.keyboard[" "]=!1,this.scene.globals.mouse.click.left=!1,this.scene.dispatchEvent(e.GameStart))},i}(b),rt=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),st=n.CANVAS_TILE_HEIGHT,at=n.CANVAS_TILE_WIDTH,ct=function(t){function e(e){var i=t.call(this,e)||this;i.scene=e,i.height=st,i.width=at,i.backgroundLayers=[],i.objects=[],i.objects.push(new E(i.scene,{positionX:0,positionY:0,width:n.CANVAS_TILE_WIDTH,height:n.CANVAS_TILE_HEIGHT,tileset:"sprites",spriteY:0,spriteX:0}));var o=new C(i.scene,{});return i.objects.push(o),i.objects.push(new ot(i.scene,{player:o})),i.objects.push(new w(i.scene,{})),i.objects.push(new x(i.scene,{player:o})),i}return rt(e,t),e}(a),ut=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),lt=function(t){function e(e){var n=t.call(this,e)||this;return n.client=e,n.maps=[ct],n.globals.score=50,n.globals.highscore=null===localStorage.getItem("highscore")?0:Number(localStorage.getItem("highscore")),n.changeMap(0),n}return ut(e,t),e}(s),ht=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),pt=function(t){function e(e,i){var o=t.call(this,e,i)||this;return o.scene=e,o.isRenderable=!0,o.width=3.5,o.height=2,o.positionX=n.CANVAS_TILE_WIDTH/2-o.width/2,o.positionY=n.CANVAS_TILE_HEIGHT/2-o.height/2,o}return ht(e,t),e.prototype.update=function(t){this.scene.globals.mouse.click.left&&(this.scene.globals.mouse.click.left=!1,r.isClickWithin(this.scene.globals.mouse.position,this.positionX,this.positionY,this.width,this.height)&&this.scene.changeScene(lt))},e.prototype.render=function(t){i.renderSprite(t,this.assets.images.sprites,22,7.25,this.positionX,this.positionY,this.width,this.height)},e}(b),dt=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),ft=n.CANVAS_TILE_HEIGHT,gt=n.CANVAS_TILE_WIDTH,mt=function(t){function e(e){var i=t.call(this,e)||this;return i.scene=e,i.height=ft,i.width=gt,i.backgroundLayers=[m],i.objects=[],i.objects.push(new pt(i.scene,{})),i.objects.push(new E(i.scene,{positionX:n.CANVAS_TILE_WIDTH/2-3,positionY:3,width:6,height:1.8,tileset:"sprites",spriteX:21.75,spriteY:5.5})),i}return dt(e,t),e}(a),bt=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),yt=function(t){function e(e){var n=t.call(this,e)||this;return n.client=e,n.maps=[mt],n.changeMap(0),n}return bt(e,t),e}(s),Et=function(){function t(){}return Object.defineProperty(t,"engineObjectList",{get:function(){return document.getElementById("object-list")||null},enumerable:!1,configurable:!0}),Object.defineProperty(t,"engineObjectDetails",{get:function(){return document.getElementById("object-details")||null},enumerable:!1,configurable:!0}),Object.defineProperty(t,"engineControls",{get:function(){return{gridLines:document.getElementById("btnGridLines"),gridNumbers:document.getElementById("btnGridNumbers"),breakpoint:document.getElementById("btnBreakpoint"),fps:document.getElementById("btnFps"),objectCount:document.getElementById("btnObjectCount"),timingFrame:document.getElementById("btnTimingFrame"),timingFrameBackground:document.getElementById("btnTimingFrameBackground"),timingFrameRender:document.getElementById("btnTimingFrameRender"),timingFrameUpdate:document.getElementById("btnTimingFrameUpdate"),canvasLayers:document.getElementById("btnCanvasLayers"),fullscreen:document.getElementById("btnFullscreen")}},enumerable:!1,configurable:!0}),t}();!function(){n.CANVAS_TILE_HEIGHT=16,n.CANVAS_TILE_WIDTH=9,n.TILE_SIZE=16;var t=new URLSearchParams(window.location.search),e=t.get("cheatcode"),i=t.get("cheatcodevalue");"joanne"!==e||null===i||isNaN(Number(i))||(_.DEFAULT_PIPE_GAP=Number(i),console.log("cheat code activated for pipe gap: "+_.DEFAULT_PIPE_GAP));var r=[yt,lt];window.engine=new o(document.getElementById("render-area"),r,{images:{sprites:"assets/sprites.png"},audio:{}},Et.engineObjectList,Et.engineObjectDetails,Et.engineControls)}()})();